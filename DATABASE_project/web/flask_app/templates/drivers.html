{% extends 'base.html' %}
{% block content %}
<h3>ğŸ“‹ å¸æœºå½•å…¥</h3>
<form method="post">
  <label>å·¥å·:</label>
  <input name="employee_no" required placeholder="å¦‚: D001">
  
  <label>å§“å:</label>
  <input name="name" required placeholder="å¦‚: å¼ ä¸‰">
  
  <label>é©¾ç…§ç­‰çº§:</label>
  <select name="license_level" required>
    <option value="">è¯·é€‰æ‹©</option>
    <option>C1</option><option>C2</option><option>B1</option><option>B2</option><option>A1</option><option>A2</option>
  </select>
  
  <label>è”ç³»æ–¹å¼:</label>
  <input name="phone" placeholder="å¦‚: 13800138000">
  
  <label>æ‰€å±è½¦é˜Ÿ:</label>
  <select name="fleet_id" required>
    <option value="">è¯·é€‰æ‹©</option>
    {% for f in fleets %}
      <option value="{{ f.FleetId }}">{{ f.Name }}</option>
    {% endfor %}
  </select>
  
  <button type="submit">ğŸ’¾ ä¿å­˜</button>
</form>

{% if edit_driver %}
<h3>âœï¸ å¸æœºä¿¡æ¯ç¼–è¾‘</h3>
<form method="post" action="/drivers/edit/{{ edit_driver.DriverId }}">
  <label>å·¥å·:</label>
  <input name="employee_no" required value="{{ edit_driver.EmployeeNo }}">

  <label>å§“å:</label>
  <input name="name" required value="{{ edit_driver.Name }}">

  <label>é©¾ç…§ç­‰çº§:</label>
  <select name="license_level" required>
    <option value="">è¯·é€‰æ‹©</option>
    {% for lvl in ['C1','C2','B1','B2','A1','A2'] %}
      <option value="{{ lvl }}" {% if edit_driver.LicenseLevel == lvl %}selected{% endif %}>{{ lvl }}</option>
    {% endfor %}
  </select>

  <label>è”ç³»æ–¹å¼:</label>
  <input name="phone" value="{{ edit_driver.Phone }}">

  <label>æ‰€å±è½¦é˜Ÿ:</label>
  <select name="fleet_id" required>
    <option value="">è¯·é€‰æ‹©</option>
    {% for f in fleets %}
      <option value="{{ f.FleetId }}" {% if edit_driver.FleetId == f.FleetId %}selected{% endif %}>{{ f.Name }}</option>
    {% endfor %}
  </select>

  <button type="submit">ğŸ’¾ æ›´æ–°</button>
  <a href="/drivers" style="margin-left:10px;">å–æ¶ˆ</a>
</form>
{% endif %}

<h3>ğŸ‘¥ å¸æœºåˆ—è¡¨</h3>
{% if drivers %}
<table>
  <thead>
    <tr><th>ID</th><th>å·¥å·</th><th>å§“å</th><th>é©¾ç…§ç­‰çº§</th><th>ç”µè¯</th><th>æ‰€å±è½¦é˜Ÿ</th><th>æ“ä½œ</th></tr>
  </thead>
  <tbody>
  {% for d in drivers %}
    <tr>
      <td>{{ d.DriverId }}</td>
      <td>{{ d.EmployeeNo }}</td>
      <td>{{ d.Name }}</td>
      <td>{{ d.LicenseLevel }}</td>
      <td>{{ d.Phone or '-' }}</td>
      <td>{{ d.FleetName }}</td>
      <td><a href="/drivers/edit/{{ d.DriverId }}">ç¼–è¾‘</a></td>
    </tr>
  {% endfor %}
  </tbody>
</table>
{% else %}
<p style="color: #999; text-align: center; padding: 20px;">æš‚æ— å¸æœºæ•°æ®</p>
{% endif %}
{% endblock %}
