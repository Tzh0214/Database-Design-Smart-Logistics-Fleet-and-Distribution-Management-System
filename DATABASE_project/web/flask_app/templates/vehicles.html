{% extends 'base.html' %}
{% block content %}
<h3>ğŸš— è½¦è¾†å½•å…¥</h3>
<form method="post">
  <label>è½¦ç‰Œ:</label>
  <input name="plate_no" required placeholder="å¦‚: A12345">
  
  <label>è½½é‡ä¸Šé™(kg):</label>
  <input name="max_weight" type="number" step="0.01" required placeholder="å¦‚: 5000">
  
  <label>å®¹ç§¯ä¸Šé™(mÂ³):</label>
  <input name="max_volume" type="number" step="0.01" required placeholder="å¦‚: 20">
  
  <label>çŠ¶æ€:</label>
  <select name="status" required>
    <option value="">è¯·é€‰æ‹©</option>
    <option>ç©ºé—²</option><option>è¿è¾“ä¸­</option><option>ç»´ä¿®ä¸­</option><option>å¼‚å¸¸</option>
  </select>
  
  <label>æ‰€å±è½¦é˜Ÿ:</label>
  <select name="fleet_id" required>
    <option value="">è¯·é€‰æ‹©</option>
    {% for f in fleets %}
      <option value="{{ f.FleetId }}">{{ f.Name }}</option>
    {% endfor %}
  </select>
  
  <button type="submit">ğŸ’¾ ä¿å­˜</button>
</form>

<h3>ğŸš› è½¦è¾†åˆ—è¡¨</h3>
<form method="get" style="margin-bottom: 16px; background: white; padding: 12px; border-radius: 6px;">
  <label>æŒ‰è½¦é˜Ÿç­›é€‰:</label>
  <select name="fleet_id" onchange="this.form.submit()">
    <option value="">å…¨éƒ¨è½¦é˜Ÿ</option>
    {% for f in fleets %}
      <option value="{{ f.FleetId }}" {% if selected_fleet_id and selected_fleet_id|int == f.FleetId %}selected{% endif %}>{{ f.Name }}</option>
    {% endfor %}
  </select>
  <noscript><button type="submit">ç­›é€‰</button></noscript>
</form>
{% if vehicles %}
<table>
  <thead>
    <tr><th>ID</th><th>è½¦ç‰Œ</th><th>è½½é‡ä¸Šé™</th><th>å®¹ç§¯ä¸Šé™</th><th>çŠ¶æ€</th><th>æ‰€å±è½¦é˜Ÿ</th></tr>
  </thead>
  <tbody>
  {% for v in vehicles %}
    <tr>
      <td>{{ v.VehicleId }}</td>
      <td><strong>{{ v.PlateNo }}</strong></td>
      <td>{{ v.MaxWeight }} kg</td>
      <td>{{ v.MaxVolume }} mÂ³</td>
      <td>{{ v.Status }}</td>
      <td>{{ v.FleetName }}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>
{% else %}
<p style="color: #999; text-align: center; padding: 20px;">æš‚æ— è½¦è¾†æ•°æ®</p>
{% endif %}
{% endblock %}
